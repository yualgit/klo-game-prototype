# KLO Match-3 Game â€” ÐŸÑ€Ð¾Ñ”ÐºÑ‚

**Ð”Ð°Ñ‚Ð° ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ:** 2026-02-05  
**Ð£Ñ‡Ð°ÑÐ½Ð¸ÐºÐ¸:** Ð’Ð°ÑÐ¸Ð»ÑŒ (Franzus), Ð ÑƒÑÐ»Ð°Ð½, Ð›ÑŽÐ¼ (Dev), Ð’ÐµÑ (Product/AD)

---

## ðŸŽ¯ Ð‘Ñ–Ð·Ð½ÐµÑ-Ð¼ÐµÑ‚Ð°

Ð“Ñ€Ð° match-3 Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¸ Ð»Ð¾ÑÐ»ÑŒÐ½Ð¾ÑÑ‚Ñ– KLO (ÑƒÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ° Ð¼ÐµÑ€ÐµÐ¶Ð° ÐÐ—Ðš) Ð· Ñ‚Ñ€ÑŒÐ¾Ð¼Ð° ÐºÐ»ÑŽÑ‡Ð¾Ð²Ð¸Ð¼Ð¸ KPI:

1. **Engagement** â€” Ñ‡Ð°Ñ Ñƒ Ð³Ñ€Ñ–, ÑÐµÑÑ–Ñ—/Ð´ÐµÐ½ÑŒ, Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¶ÐµÐ½Ð½Ñ L1â€“20
2. **Redemption** â€” ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ ÐºÑƒÐ¿Ð¾Ð½Ñ–Ð² Ð· Ð³Ñ€Ð¸, Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ Ð¿Ð¾Ð³Ð°ÑˆÐµÐ½Ð¸Ñ… Ð½Ð° ÐÐ—Ðš
3. **Category sales attribution** â€” ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ñ‚Ð¾Ð²Ð°Ñ€Ñ–Ð² (ÐºÐ°Ð²Ð°/Ñ„Ð°ÑÑ‚Ñ„ÑƒÐ´/Ð¼Ð°Ñ€ÐºÐµÑ‚), ÐºÑƒÐ¿Ð»ÐµÐ½Ð¸Ñ… Ð·Ð°Ð²Ð´ÑÐºÐ¸ ÐºÑƒÐ¿Ð¾Ð½Ð°Ð¼ Ð· Ð³Ñ€Ð¸ (Ñ‡ÐµÑ€ÐµÐ· `coupon_id` â†’ `receipt_id`)

**ÐžÐ±Ð¼ÐµÐ¶ÐµÐ½Ð½Ñ:**
- Ð§Ð°ÑÑ‚Ñ– Ð½Ð°Ð³Ð¾Ñ€Ð¾Ð´Ð¸ â€” Ð²Ð½ÑƒÑ‚Ñ€Ñ–ÑˆÐ½Ñ– Ð±ÑƒÑÑ‚ÐµÑ€Ð¸/Ð¼Ð½Ð¾Ð¶Ð½Ð¸ÐºÐ¸ (Ð½Ðµ ÐºÐ¾ÑˆÑ‚ÑƒÑŽÑ‚ÑŒ KLO Ð³Ñ€Ð¾ÑˆÐµÐ¹)
- Ð Ñ–Ð´ÐºÑ– Ð½Ð°Ð³Ð¾Ñ€Ð¾Ð´Ð¸ â€” Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ– Ð·Ð½Ð¸Ð¶ÐºÐ¸/ÐºÑƒÐ¿Ð¾Ð½Ð¸, Ð· Ð¶Ð¾Ñ€ÑÑ‚ÐºÐ¸Ð¼Ð¸ Ð»Ñ–Ð¼Ñ–Ñ‚Ð°Ð¼Ð¸ Ð¹ Ð°Ð½Ñ‚Ð¸Ñ„Ñ€Ð¾Ð´Ð¾Ð¼

---

## ðŸ“¦ Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ñ–Ñ Ñ€Ð¾Ð·Ñ€Ð¾Ð±ÐºÐ¸

### ÐŸÑ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿ (1â€“2 Ñ‚Ð¸Ð¶Ð½Ñ–, PWA)
- **Ð¡Ñ‚ÐµÐº:** Phaser 3 (Ð°Ð±Ð¾ pixi.js) + TypeScript
- **Backend:** Firebase (Firestore, Auth, Analytics, Hosting, Remote Config)
- **ÐœÐµÑ‚Ð°:** Ð‘Ð°Ð·Ð¾Ð²Ð¸Ð¹ match-3, Ð¿ÐµÑ€ÑˆÑ– 5â€“10 Ñ€Ñ–Ð²Ð½Ñ–Ð², Ð¼Ð¾ÐºÐ¸ ÐºÑƒÐ¿Ð¾Ð½Ñ–Ð², Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€ÐºÐ° feel Ð³Ñ€Ð¸ + Ð±Ð°Ð»Ð°Ð½ÑÑƒ

### MVP (Ð´Ð°Ð»Ñ–, Unity)
- **Engine:** Unity + Firebase (Ð±ÐµÐ·ÑˆÐ¾Ð²Ð½Ð° Ð¼Ñ–Ð³Ñ€Ð°Ñ†Ñ–Ñ Ð´Ð°Ð½Ð¸Ñ… Ð· Ð¿Ñ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿Ñƒ)
- **Match-3 engine:** Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ð¹ asset Ð· Unity Asset Store
- **ÐœÐµÑ‚Ð°:** 100+ Ñ€Ñ–Ð²Ð½Ñ–Ð², Ð¿Ð¾Ð²Ð½Ð° Ñ–Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ñ–Ñ ÐºÑƒÐ¿Ð¾Ð½Ñ–Ð² Ð· ÐºÐ°ÑÐ°Ð¼Ð¸ KLO, Ð°Ð½Ð°Ð»Ñ–Ñ‚Ð¸ÐºÐ°, remote config, production-ready

---

## ðŸŽ® Core Loop

1. **Ð“Ñ€Ð°Ð²ÐµÑ†ÑŒ Ð²Ñ–Ð´ÐºÑ€Ð¸Ð²Ð°Ñ” Ð³Ñ€Ñƒ** (Ð· Ð´Ð¾Ð´Ð°Ñ‚ÐºÐ° KLO Ð°Ð±Ð¾ ÑÐº PWA)
2. **ÐŸÑ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ñ€Ñ–Ð²ÐµÐ½ÑŒ match-3** (1â€“2 Ñ…Ð²)
   - Ð—Ð±Ð¸Ñ€Ð°Ñ” Ñ„Ñ–ÑˆÐºÐ¸ (Ð¿Ð°Ð»Ð¸Ð²Ð¾, ÐºÐ°Ð²Ð°, ÑÐ½ÐµÐºÐ¸, Ð´Ð¾Ñ€Ð¾Ð³Ð°)
   - Ð”Ð¾Ð»Ð°Ñ” Ð¿ÐµÑ€ÐµÑˆÐºÐ¾Ð´Ð¸ (Ð»Ñ–Ð´, Ð±Ñ€ÑƒÐ´, ÑÑ‰Ð¸ÐºÐ¸)
   - Ð’Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ” Ð±ÑƒÑÑ‚ÐµÑ€Ð¸ (Ð»Ñ–Ð½Ñ–Ð¹Ð½Ð¸Ð¹, Ð±Ð¾Ð¼Ð±Ð°, Ñ€Ð°ÐºÐµÑ‚Ð°, KLO-ÑÑ„ÐµÑ€Ð°)
3. **ÐžÑ‚Ñ€Ð¸Ð¼ÑƒÑ” Ð½Ð°Ð³Ð¾Ñ€Ð¾Ð´Ñƒ:**
   - Ð§Ð°ÑÑ‚Ð¾: Ð²Ð½ÑƒÑ‚Ñ€Ñ–ÑˆÐ½Ñ– Ð±ÑƒÑÑ‚ÐµÑ€Ð¸, Ð¶Ð¸Ñ‚Ñ‚Ñ, Ð¼Ð½Ð¾Ð¶Ð½Ð¸ÐºÐ¸
   - Ð Ñ–Ð´ÐºÐ¾: Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¸Ð¹ ÐºÑƒÐ¿Ð¾Ð½ (ÐºÐ°Ð²Ð°, -Ð³Ñ€Ð½/Ð», Ð¼Ð°Ñ€ÐºÐµÑ‚) Ð· Ð»Ñ–Ð¼Ñ–Ñ‚Ð°Ð¼Ð¸
4. **Ð’Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ” ÐºÑƒÐ¿Ð¾Ð½ Ð½Ð° ÐÐ—Ðš** â†’ redemption Ð»Ð¾Ð³ÑƒÑ”Ñ‚ÑŒÑÑ â†’ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ†Ñ–Ñ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ñ–Ð²
5. **ÐŸÐ¾Ð²ÐµÑ€Ñ‚Ð°Ñ”Ñ‚ÑŒÑÑ Ð·Ð° Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ð¸Ð¼ Ñ€Ñ–Ð²Ð½ÐµÐ¼** (Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ–Ñ, Ð¼Ñ–ÑÑ–Ñ—, ÑÑ‚Ñ€Ñ–ÐºÐ¸)

---

## ðŸ—ï¸ ÐÑ€Ñ…Ñ–Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° (Ñ‚ÐµÑ…Ð½Ñ–Ñ‡Ð½Ð°)

### ÐŸÑ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿ (PWA)
- **Frontend:** Phaser 3 + TypeScript
- **Backend:** Firebase
  - Firestore: Ð´Ð°Ð½Ñ– ÑŽÐ·ÐµÑ€Ñ–Ð², Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑ, ÐºÑƒÐ¿Ð¾Ð½Ð¸
  - Auth: Ð°Ð½Ð¾Ð½Ñ–Ð¼Ð½Ð° + phone (Ð¿Ñ€Ð¸Ð²'ÑÐ·ÐºÐ° Ð´Ð¾ loyalty_id)
  - Analytics: Ð²ÑÑ– Ð¿Ð¾Ð´Ñ–Ñ— Ð³Ñ€Ð¸
  - Remote Config: Ð±Ð°Ð»Ð°Ð½Ñ Ñ€Ñ–Ð²Ð½Ñ–Ð², Ñ‡Ð°ÑÑ‚Ð¾Ñ‚Ð° Ð½Ð°Ð³Ð¾Ñ€Ð¾Ð´, A/B Ñ‚ÐµÑÑ‚Ð¸
  - Hosting: PWA deployment
- **Match-3 engine:** Ð³Ð¾Ñ‚Ð¾Ð²Ð° Ð±Ñ–Ð±Ð»Ñ–Ð¾Ñ‚ÐµÐºÐ° Ð°Ð±Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¸Ð¹ grid manager

### MVP (Unity)
- **Engine:** Unity (iOS/Android/WebGL)
- **Backend:** Ñ‚Ð¾Ð¹ ÑÐ°Ð¼Ð¸Ð¹ Firebase
- **Match-3 engine:** Unity Asset Store (Match 3 Kit Ð°Ð±Ð¾ Ð°Ð½Ð°Ð»Ð¾Ð³)

### JSON Ñ€Ñ–Ð²Ð½Ñ– (Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚)
```json
{
  "level_id": 1,
  "moves": 15,
  "grid": {"width": 8, "height": 8, "blocked_cells": [[0,0], [7,7]]},
  "goals": [
    {"type": "collect", "item": "fuel", "count": 20},
    {"type": "destroy", "obstacle": "ice", "count": 5}
  ],
  "spawn_rules": {"fuel": 0.3, "coffee": 0.25, "snack": 0.25, "road": 0.2},
  "obstacles": [{"type": "ice", "positions": [[3,3], [4,4]]}]
}
```

### Remote Config (Firebase)
- `level_data` â€” JSON Ð¼Ð°ÑÐ¸Ð² Ñ€Ñ–Ð²Ð½Ñ–Ð² (Ð´Ð¾Ð´Ð°Ñ”Ð¼Ð¾ Ð½Ð¾Ð²Ñ– Ð±ÐµÐ· Ñ€ÐµÐ»Ñ–Ð·Ñƒ)
- `reward_frequency` â€” ÑÐº Ñ‡Ð°ÑÑ‚Ð¾ Ð¿Ð°Ð´Ð°ÑŽÑ‚ÑŒ ÐºÑƒÐ¿Ð¾Ð½Ð¸
- `coupon_types` â€” ÑÐºÑ– ÐºÑƒÐ¿Ð¾Ð½Ð¸ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ–
- `booster_prices` â€” ÑÐºÑ‰Ð¾ Ð±ÑƒÐ´Ðµ Ð¼Ð¾Ð½ÐµÑ‚Ð¸Ð·Ð°Ñ†Ñ–Ñ
- Ð¤Ð»Ð°Ð³Ð¸ Ð´Ð»Ñ A/B Ñ‚ÐµÑÑ‚Ñ–Ð²

---

## ðŸŽ¨ Ð’Ñ–Ð·ÑƒÐ°Ð»ÑŒÐ½Ð¸Ð¹ ÑÑ‚Ð¸Ð»ÑŒ

**Ð¢ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°:** Ð´Ð¾Ñ€Ð¾Ð³Ð°, Ð¿Ð°Ð»Ð¸Ð²Ð¾, ÐºÐ°Ð²Ð°, Ð¼Ð°Ñ€ÐºÐµÑ‚, Ñ„Ð°ÑÑ‚Ñ„ÑƒÐ´, ÑÑƒÑ‡Ð°ÑÐ½Ð° Ð»Ð¾Ð³Ñ–ÑÑ‚Ð¸ÐºÐ°

**ÐŸÐ°Ð»Ñ–Ñ‚Ñ€Ð°:**
- Ð¢ÐµÐ¿Ð»Ñ– Ð¶Ð¾Ð²Ñ‚Ð¾-Ð¿Ð¾Ð¼Ð°Ñ€Ð°Ð½Ñ‡ÐµÐ²Ñ– (KLO Ð±Ñ€ÐµÐ½Ð´)
- Ð“Ð»Ð¸Ð±Ð¾ÐºÑ– ÑÐ¸Ð½Ñ–/Ñ‚ÐµÐ¼Ð½Ð¾-ÑÑ–Ñ€Ñ–
- ÐÐµÐ¾Ð½Ð¾Ð²Ñ– Ð°ÐºÑ†ÐµÐ½Ñ‚Ð¸ (Ð½Ñ–Ñ‡Ð½Ð° Ñ‚Ñ€Ð°ÑÐ°)

**Ð¡Ñ‚Ð¸Ð»ÑŒ:**
- Ð§Ð¸ÑÑ‚Ð¸Ð¹, ÑÑƒÑ‡Ð°ÑÐ½Ð¸Ð¹, "Ð´Ð¾Ñ€Ð¾ÑÐ»Ð¸Ð¹" (Ð½Ðµ Ð´Ð¸Ñ‚ÑÑ‡Ð° Ð¼ÑƒÐ»ÑŒÑ‚ÑÑˆÐ½Ñ–ÑÑ‚ÑŒ)
- Flat UI, ÑÐºÑ€ÑƒÐ³Ð»ÐµÐ½Ñ– Ð±Ð»Ð¾ÐºÐ¸, Ð¼Ñ–Ð½Ñ–Ð¼Ð°Ð»Ñ–ÑÑ‚Ð¸Ñ‡Ð½Ñ– Ñ–ÐºÐ¾Ð½ÐºÐ¸
- Ð•Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð¸ Ð½Ð° Ð¿Ð¾Ð»Ñ–: ÐºÑ€Ð°Ð¿Ð»Ñ– Ð¿Ð°Ð»Ð¸Ð²Ð°, ÐºÐ°Ð²Ð¾Ð²Ñ– ÑÑ‚Ð°ÐºÐ°Ð½Ð¸, Ð´Ð¾Ñ€Ð¾Ð¶Ð½Ñ– ÐºÐ¾Ð½ÑƒÑÐ¸, Ð¿Ð°ÐºÑƒÐ½ÐºÐ¸ Ð· Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ñƒ, Ð·Ð½Ð°Ñ‡ÐºÐ¸ Ð¼Ð°ÑˆÐ¸Ð½Ð¸/Ð´Ð¾Ñ€Ð¾Ð³Ð¸
- Ð¤Ð¾Ð½ Ñ€Ñ–Ð²Ð½Ñ–Ð²: Ð°Ñ‚Ð¼Ð¾ÑÑ„ÐµÑ€Ð½Ñ– ÑÑ†ÐµÐ½Ð¸ Ð· Ñ‚Ñ€Ð°ÑÐ°Ð¼Ð¸/Ð¼Ñ–ÑÑ‚Ð°Ð¼Ð¸/Ð·Ð°Ð¿Ñ€Ð°Ð²ÐºÐ°Ð¼Ð¸ (Ð´ÐµÐ½ÑŒ/Ð½Ñ–Ñ‡ Ð·Ð¼Ñ–Ð½ÑŽÑŽÑ‚ÑŒÑÑ)
- ÐÐ½Ñ–Ð¼Ð°Ñ†Ñ–Ñ—: Ð¿Ð»Ð°Ð²Ð½Ñ–, Ð°Ð»Ðµ Ð½Ðµ Ð¿Ð¾Ð²Ñ–Ð»ÑŒÐ½Ñ–; Ð²Ð¸Ð±ÑƒÑ…Ð¸ Ð±ÑƒÑÑ‚ÐµÑ€Ñ–Ð² ÑÐº Ñ…Ð²Ð¸Ð»Ñ– ÑÐ²Ñ–Ñ‚Ð»Ð° (Ð½Ðµ cartoon explosion)

**Ð’Ñ–Ð´Ñ‡ÑƒÑ‚Ñ‚Ñ:** "Ð²Ñ–Ð´Ñ‡ÑƒÐ²Ð°Ñ”Ñ‚ÑŒÑÑ ÑÐº ÐºÐ°Ð·ÑƒÐ°Ð», Ð²Ð¸Ð³Ð»ÑÐ´Ð°Ñ” ÑÐº KLO"

---

## ðŸ“Š ÐÐ½Ð°Ð»Ñ–Ñ‚Ð¸ÐºÐ° (Firebase Analytics)

### ÐŸÐ¾Ð´Ñ–Ñ—
- `level_start`, `level_win`, `level_fail`, `level_retry`
- `booster_used`, `combo_triggered`
- `reward_shown`, `coupon_claimed`, `coupon_redeemed` (ÐºÐ»ÑŽÑ‡Ð¾Ð²Ð° Ð´Ð»Ñ KPI #2)
- `session_start`, `session_end`

### User Properties
- `loyalty_id` (Ð¿Ñ€Ð¸Ð²'ÑÐ·ÐºÐ° Ð´Ð¾ KLO)
- `total_levels_completed`
- `total_coupons_claimed`, `total_coupons_redeemed`

### ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸
- D1/D7 retention
- Completion rate L1â€“20 (Ñ†Ñ–Ð»ÑŒ: >60%)
- Fail rate per level (Ñ†Ñ–Ð»ÑŒ: <40%)
- Average session length (Ñ†Ñ–Ð»ÑŒ: 2â€“4 Ñ…Ð²)
- Redemption rate = `coupons_redeemed / coupons_claimed` (Ñ†Ñ–Ð»ÑŒ: >30%)
- Category sales attribution (Ñ‡ÐµÑ€ÐµÐ· `coupon_id` â†’ `receipt_id`)

---

## ðŸŽŸï¸ Ð†Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ñ–Ñ ÐºÑƒÐ¿Ð¾Ð½Ñ–Ð²

### Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ñ–Ñ ÐºÑƒÐ¿Ð¾Ð½Ð°
1. Ð“Ñ€Ð°Ð²ÐµÑ†ÑŒ Ð²Ð¸Ð³Ñ€Ð°Ð² Ñ€Ñ–Ð²ÐµÐ½ÑŒ/Ð´Ð¾ÑÑÐ³Ð½ÐµÐ½Ð½Ñ â†’ Firebase Function `generateCoupon`
2. ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€ÐºÐ¸: Ð»Ñ–Ð¼Ñ–Ñ‚Ð¸ ÑŽÐ·ÐµÑ€Ð°, Ð±ÑŽÐ´Ð¶ÐµÑ‚ ÐºÐ°Ð¼Ð¿Ð°Ð½Ñ–Ñ—, Ð°Ð½Ñ‚Ð¸Ñ„Ñ€Ð¾Ð´
3. Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ñ–Ñ `coupon_id` (UUID Ð°Ð±Ð¾ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ð¹ ÐºÐ¾Ð´ `KLO-AB12CD`)
4. Ð—Ð±ÐµÑ€ÐµÐ¶ÐµÐ½Ð½Ñ Ð² Firestore:
```json
{
  "coupon_id": "KLO-AB12CD",
  "user_id": "firebase_uid",
  "loyalty_id": "klo_loyalty_12345",
  "category": "coffee",
  "value": "Ð±ÐµÐ·ÐºÐ¾ÑˆÑ‚Ð¾Ð²Ð½Ð° ÐºÐ°Ð²Ð° S",
  "expires_at": "2026-02-12T23:59:59Z",
  "status": "active"
}
```

### ÐŸÐ¾Ð³Ð°ÑˆÐµÐ½Ð½Ñ ÐºÑƒÐ¿Ð¾Ð½Ð° (production)
- ÐšÐ°ÑÐ¸Ñ€ ÑÐºÐ°Ð½ÑƒÑ” QR/Ð²Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ ÐºÐ¾Ð´ â†’ ÐºÐ°ÑÐ° â†’ KLO backend â†’ Firebase Function `redeemCoupon`
- ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€ÐºÐ° Ð²Ð°Ð»Ñ–Ð´Ð½Ð¾ÑÑ‚Ñ– â†’ ÑÐ¿Ð¸ÑÐ°Ð½Ð½Ñ ÐºÑƒÐ¿Ð¾Ð½Ñƒ â†’ Ð»Ð¾Ð³:
```json
{
  "coupon_id": "KLO-AB12CD",
  "redeemed_at": "2026-02-06T10:30:00Z",
  "station_id": "klo_station_42",
  "receipt_id": "receipt_98765",
  "category": "coffee",
  "product_id": "coffee_latte_s"
}
```

### ÐÑ‚Ñ€Ð¸Ð±ÑƒÑ†Ñ–Ñ
Ð›Ð°Ð½Ñ†ÑŽÐ¶Ð¾Ðº: `game_user_id` â†” `loyalty_id` â†” `coupon_id` â†” `receipt_id` â†” `category` + `product_id`

Ð—Ð²Ñ–Ñ‚: Ð²ÑÑ– `coupon_id` Ð·Ñ– ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð¼ `redeemed` â†’ Ð´Ð»Ñ ÐºÐ¾Ð¶Ð½Ð¾Ð³Ð¾ `receipt_id` â†’ ÑÐºÐ»Ð°Ð´ Ñ‡ÐµÐºÐ° â†’ Ð¿Ñ–Ð´Ñ€Ð°Ñ…ÑƒÐ½Ð¾Ðº Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ñ–Ð² Ð¿Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ñ–ÑÑ…

---

## âš ï¸ Ð Ð¸Ð·Ð¸ÐºÐ¸ + Ð¼Ñ–Ñ‚Ñ–Ð³Ð°Ñ†Ñ–Ñ—

### Ð Ð¸Ð·Ð¸Ðº 1: Ð‘Ð°Ð»Ð°Ð½Ñ ÑÐºÐ»Ð°Ð´Ð½Ð¾ÑÑ‚Ñ– â†’ Ð²Ð¸ÑÐ¾ÐºÐ¸Ð¹ fail rate â†’ churn
**ÐœÑ–Ñ‚Ñ‚Ñ–Ð³:**
- ÐŸÐ»ÐµÐ¹Ñ‚ÐµÑÑ‚Ð¸ Ð¿ÐµÑ€ÑˆÐ¸Ñ… 20 Ñ€Ñ–Ð²Ð½Ñ–Ð² Ð· 10+ Ð»ÑŽÐ´ÑŒÐ¼Ð¸ Ð´Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÑƒ
- ÐœÐ¾Ð½Ñ–Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ fail rate Ñ‡ÐµÑ€ÐµÐ· Firebase Analytics
- Ð¯ÐºÑ‰Ð¾ fail rate >40% Ð½Ð° L1â€“10 â†’ Ð¿Ñ€Ð°Ð²ÐºÐ¸ moves/obstacles Ñ‡ÐµÑ€ÐµÐ· remote config
- Ð¦Ñ–Ð»ÑŒÐ¾Ð²Ñ– Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸:
  - L1â€“5: fail rate <10%
  - L6â€“10: fail rate <25%
  - L11â€“20: fail rate <40%

### Ð Ð¸Ð·Ð¸Ðº 2: Ð•ÐºÐ¾Ð½Ð¾Ð¼Ñ–ÐºÐ° ÐºÑƒÐ¿Ð¾Ð½Ñ–Ð² â†’ Ð½Ð°Ð´Ñ‚Ð¾ Ñ‰ÐµÐ´Ñ€Ñ– = Ð·Ð±Ð¸Ñ‚ÐºÐ¸ / Ð½Ð°Ð´Ñ‚Ð¾ ÑÐºÑƒÐ¿Ñ– = Ð½ÐµÑ†Ñ–ÐºÐ°Ð²Ð° Ð³Ñ€Ð°
**ÐœÑ–Ñ‚Ñ‚Ñ–Ð³:**
- Ð–Ð¾Ñ€ÑÑ‚ÐºÑ– Ð»Ñ–Ð¼Ñ–Ñ‚Ð¸:
  - ÐœÐ°ÐºÑ 3 "Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ–" ÐºÑƒÐ¿Ð¾Ð½Ð¸/Ñ‚Ð¸Ð¶Ð´ÐµÐ½ÑŒ Ð½Ð° ÑŽÐ·ÐµÑ€Ð°
  - ÐœÐ°ÐºÑ 1 ÐºÑƒÐ¿Ð¾Ð½ "-5 Ð³Ñ€Ð½/Ð»" Ð½Ð° Ð¼Ñ–ÑÑÑ†ÑŒ
  - Ð—Ð°Ð³Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð±ÑŽÐ´Ð¶ÐµÑ‚ ÐºÐ°Ð¼Ð¿Ð°Ð½Ñ–Ñ—: 50 000 Ð³Ñ€Ð½/Ð¼Ñ–Ñ â†’ ÐºÐ¾Ð»Ð¸ Ð²Ð¸Ñ‡ÐµÑ€Ð¿Ð°Ð½Ð¾, Ñ‚Ñ–Ð»ÑŒÐºÐ¸ Ð²Ð½ÑƒÑ‚Ñ€Ñ–ÑˆÐ½Ñ– Ð±ÑƒÑÑ‚ÐµÑ€Ð¸
- A/B Ñ‚ÐµÑÑ‚Ð¸ Ñ‡Ð°ÑÑ‚Ð¾Ñ‚Ð¸ (ÐºÑƒÐ¿Ð¾Ð½ ÐºÐ¾Ð¶Ð½Ñ– 5 Ñ€Ñ–Ð²Ð½Ñ–Ð² vs 10 Ñ€Ñ–Ð²Ð½Ñ–Ð²)
- ÐŸÑ€Ñ–Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚: 80% Ð½Ð°Ð³Ð¾Ñ€Ð¾Ð´ = Ð±ÑƒÑÑ‚ÐµÑ€Ð¸, 20% = ÐºÑƒÐ¿Ð¾Ð½Ð¸

### Ð Ð¸Ð·Ð¸Ðº 3: Ð¤Ñ€Ð¾Ð´ / Ð½Ð°ÐºÑ€ÑƒÑ‚ÐºÐ° (Ð±Ð¾Ñ‚Ð¸, Ð¼ÑƒÐ»ÑŒÑ‚Ð¸Ð°ÐºÐ°ÑƒÐ½Ñ‚Ð¸)
**ÐœÑ–Ñ‚Ñ‚Ñ–Ð³:**
- ÐŸÑ€Ð¸Ð²'ÑÐ·ÐºÐ° Ð´Ð¾ loyalty_id (Ð¾Ð´Ð¸Ð½ loyalty_id = Ð¾Ð´Ð¸Ð½ Ð°ÐºÐ°ÑƒÐ½Ñ‚)
- Ð›Ñ–Ð¼Ñ–Ñ‚Ð¸ device/IP (Ð¼Ð°ÐºÑ 1 Ð½Ð¾Ð²Ð¸Ð¹ Ð°ÐºÐ°ÑƒÐ½Ñ‚/Ð´ÐµÐ½ÑŒ Ð· Ð¾Ð´Ð½Ð¾Ð³Ð¾ device)
- ÐÐ½Ñ‚Ð¸Ñ„Ñ€Ð¾Ð´ Ð¿Ð°Ñ‚ÐµÑ€Ð½Ð¸: 100 Ñ€Ñ–Ð²Ð½Ñ–Ð² Ð·Ð° 2 Ð³Ð¾Ð´Ð¸Ð½Ð¸ = Ð¼Ð¾Ð´ÐµÑ€Ð°Ñ†Ñ–Ñ
- Ð£Ð½Ñ–ÐºÐ°Ð»ÑŒÐ½Ñ– ÐºÑƒÐ¿Ð¾Ð½Ð¸ + TTL (7â€“14 Ð´Ð½Ñ–Ð²)
- ÐŸÑ€Ð¸ Ð¿Ð¾Ð³Ð°ÑˆÐµÐ½Ð½Ñ– Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€ÐºÐ° `user_id` vs `loyalty_id`

---

## ðŸ“… ÐŸÐ»Ð°Ð½ (2 Ñ‚Ð¸Ð¶Ð½Ñ– Ð½Ð° Ð¿Ñ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿)

### Ð¢Ð¸Ð¶Ð´ÐµÐ½ÑŒ 1
- **Dev:** Ð‘Ð°Ð·Ð¾Ð²Ð¸Ð¹ match-3 + 3 ÑÐ¿ÐµÑ†Ñ„Ñ–ÑˆÐºÐ¸ (Ð»Ñ–Ð½Ñ–Ð¹Ð½Ð¸Ð¹, Ð±Ð¾Ð¼Ð±Ð°, ÑÑ„ÐµÑ€Ð°) + JSON level loader
- **Product:** Spec L1â€“20 + economy v0 + events list
- **Art:** Style bible v0 + UI Ð¾Ð¿Ð¸Ñ

### Ð¢Ð¸Ð¶Ð´ÐµÐ½ÑŒ 2
- **Dev:** ÐŸÐµÑ€ÐµÑˆÐºÐ¾Ð´Ð¸ + win/lose + ÐºÐ°Ñ€Ñ‚Ð° Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑƒ + Ð°Ð½Ð°Ð»Ñ–Ñ‚Ð¸ÐºÐ°
- **Product:** ÐšÐ°Ñ€Ñ‚ÐºÐ¸ Ð¼Ñ–Ð¶ Ñ€Ñ–Ð²Ð½ÑÐ¼Ð¸ + Ñ„Ñ€Ð°Ð·Ð¸ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÐºÐ¸ + Ð±Ð°Ð»Ð°Ð½Ñ moves
- **Ð¡Ð¿Ñ–Ð»ÑŒÐ½Ð¾:** ÐŸÐ»ÐµÐ¹Ñ‚ÐµÑÑ‚, Ð¿Ñ€Ð°Ð²ÐºÐ¸

---

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ñ–ÑŽ

```
klo-match3/
â”œâ”€â”€ README.md (Ñ†ÐµÐ¹ Ñ„Ð°Ð¹Ð»)
â”œâ”€â”€ TECH_SPEC.md (Ñ‚ÐµÑ…Ð½Ñ–Ñ‡Ð½Ð° ÑÐ¿ÐµÑ†Ð¸Ñ„Ñ–ÐºÐ°Ñ†Ñ–Ñ)
â”œâ”€â”€ GAME_DESIGN.md (Ð³ÐµÐ¹Ð¼Ð´Ð¸Ð·Ð°Ð¹Ð½, Ð¼ÐµÑ…Ð°Ð½Ñ–ÐºÐ¸, Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ–Ñ)
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ STYLE_GUIDE.md (Ð²Ñ–Ð·ÑƒÐ°Ð»ÑŒÐ½Ð¸Ð¹ ÑÑ‚Ð¸Ð»ÑŒ)
â”‚   â”œâ”€â”€ ANALYTICS.md (Ð¿Ð¾Ð´Ñ–Ñ—, Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸)
â”‚   â””â”€â”€ COUPONS.md (Ñ–Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ñ–Ñ ÐºÑƒÐ¿Ð¾Ð½Ñ–Ð²)
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ levels/ (JSON Ñ€Ñ–Ð²Ð½Ñ–)
â”‚   â””â”€â”€ config/ (remote config ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¸)
â”œâ”€â”€ src/ (ÐºÐ¾Ð´ Ð¿Ñ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿Ñƒ)
â””â”€â”€ assets/ (Ð³Ñ€Ð°Ñ„Ñ–ÐºÐ°, Ð·Ð²ÑƒÐºÐ¸)
```

---

## ðŸš€ ÐÐ°ÑÑ‚ÑƒÐ¿Ð½Ñ– ÐºÑ€Ð¾ÐºÐ¸

1. âœ… Ð¡Ñ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¿Ñ€Ð¾Ñ”ÐºÑ‚Ñƒ
2. â¬œ ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚Ð¸ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð³ÐµÐ¹Ð¼Ð´Ð¸Ð·Ð°Ð¹Ð½ (GAME_DESIGN.md)
3. â¬œ Ð¡Ñ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ JSON Ð´Ð»Ñ Ð¿ÐµÑ€ÑˆÐ¸Ñ… 20 Ñ€Ñ–Ð²Ð½Ñ–Ð²
4. â¬œ ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚Ð¸ Ñ‚ÐµÑ…Ð½Ñ–Ñ‡Ð½Ñƒ ÑÐ¿ÐµÑ†Ð¸Ñ„Ñ–ÐºÐ°Ñ†Ñ–ÑŽ (TECH_SPEC.md)
5. â¬œ Ð¡Ñ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ style guide (STYLE_GUIDE.md)
6. â¬œ ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸ Firebase Ð¿Ñ€Ð¾ÐµÐºÑ‚
7. â¬œ ÐŸÐ¾Ñ‡Ð°Ñ‚Ð¸ Ñ€Ð¾Ð·Ñ€Ð¾Ð±ÐºÑƒ Ð¿Ñ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿Ñƒ (Phaser 3)

---

**ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¸:**
- Ð’Ð°ÑÐ¸Ð»ÑŒ (Franzus): franzus5
- Ð ÑƒÑÐ»Ð°Ð½: @ruslanhordiienko
- Telegram Ð³Ñ€ÑƒÐ¿Ð°: 513 Sandbox
