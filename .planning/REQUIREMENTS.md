# Requirements: KLO Match-3 Demo

**Defined:** 2026-02-05
**Core Value:** Клієнт має побачити і відчути gameplay — playable demo для презентації

## v1 Requirements

### Core Mechanics

- [ ] **CORE-01**: Гравець може обміняти місцями дві сусідні фішки (tap/swipe)
- [ ] **CORE-02**: 3+ однакових фішки в ряд/колонку автоматично зникають
- [ ] **CORE-03**: Після зникнення фішки падають вниз (gravity)
- [ ] **CORE-04**: Нові фішки з'являються зверху (spawn за ймовірностями з level JSON)
- [ ] **CORE-05**: Каскадні матчі працюють автоматично до стабілізації (з depth limit)
- [ ] **CORE-06**: Визначення відсутності валідних ходів + автоматичне перемішування

### Tile Types

- [ ] **TILE-01**: Паливо (fuel) — жовта крапля
- [ ] **TILE-02**: Кава (coffee) — коричневий стакан
- [ ] **TILE-03**: Снеки (snack) — упаковка
- [ ] **TILE-04**: Дорога (road) — дорожній знак

### Boosters

- [ ] **BOOST-01**: Лінійний бустер (4 в ряд) — чистить ряд або колонку
- [ ] **BOOST-02**: Бомба (5 в Г/Т форму) — вибух 3×3
- [ ] **BOOST-03**: Ракета (комбо двох лінійних) — чистить хрест (ряд + колонка)
- [ ] **BOOST-04**: KLO-сфера (5 в ряд) — знищує всі фішки одного типу
- [ ] **BOOST-05**: Комбо бустерів — взаємодія між бустерами при swap

### Obstacles

- [ ] **OBST-01**: Лід (ice) — 1-2 удари для знищення, тайл під льодом заблокований
- [ ] **OBST-02**: Бруд (dirt) — 1 удар, блокує фішку
- [ ] **OBST-03**: Ящик (crate) — 2-3 удари, знищується від сусідніх матчів
- [ ] **OBST-04**: Заблокована клітинка (blocked) — фішки не розміщуються

### Levels

- [ ] **LVL-01**: Рівні L1-5 завантажуються з JSON файлів
- [ ] **LVL-02**: Цілі рівня відображаються (збір фішок, знищення перешкод, створення бустерів)
- [ ] **LVL-03**: Лічильник ходів працює та зменшується при swap
- [ ] **LVL-04**: Win при виконанні всіх цілей (до вичерпання ходів)
- [ ] **LVL-05**: Lose при закінченні ходів без виконання всіх цілей

### UI Screens

- [ ] **UI-01**: Ігрове поле 8×8 з анімованими фішками
- [ ] **UI-02**: HUD — панель цілей + лічильник ходів
- [ ] **UI-03**: Екран перемоги з результатом та кнопкою "далі"
- [ ] **UI-04**: Екран поразки з кнопкою retry
- [ ] **UI-05**: Меню вибору рівня (L1-5) з індикацією пройдених
- [ ] **UI-06**: Мок UI отримання купона (після перемоги на L5)

### Firebase

- [ ] **FB-01**: Анонімна авторизація (автоматичний вхід без реєстрації)
- [ ] **FB-02**: Збереження прогресу в Firestore (пройдені рівні, поточний рівень)

### Assets

- [ ] **ASSET-01**: AI-generated тайли (4 типи) по STYLE_GUIDE.md
- [ ] **ASSET-02**: AI-generated бустери (4 типи)
- [ ] **ASSET-03**: AI-generated перешкоди (лід, бруд, ящик, blocked)
- [ ] **ASSET-04**: Базові UI елементи (кнопки, картки, фони)
- [ ] **ASSET-05**: Фон ігрового поля

## v2 Requirements

### Analytics
- **ANAL-01**: Firebase Analytics — level_start, level_win, level_fail
- **ANAL-02**: Booster usage tracking
- **ANAL-03**: Session tracking

### Meta-game
- **META-01**: Карта рівнів з прогресією
- **META-02**: Щоденні місії
- **META-03**: Стріки активності

### Coupon System
- **COUP-01**: Cloud Functions для генерації купонів
- **COUP-02**: Реальна система redemption
- **COUP-03**: Антифрод перевірки

### Polish
- **POL-01**: Звукові ефекти та музика
- **POL-02**: Hint system (підказка після N секунд)
- **POL-03**: Картки між рівнями
- **POL-04**: Фрази підтримки (з GAME_DESIGN.md)

## Out of Scope

| Feature | Reason |
|---------|--------|
| Об'єкти доставки (канистры) | З'являються з L8+, не потрібні для L1-5 |
| Phone auth / loyalty_id | Не для демо |
| Remote Config | Статичні JSON достатні для прототипу |
| Рівні L6-20 | 5 рівнів достатньо для демо |
| Level generator | Ручні рівні для прототипу |
| A/B тести | Потрібна аудиторія |
| Real-time multiplayer | Не в скоупі продукту |
| In-app purchases | Безкоштовна гра з купонами |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| (Populated during roadmap creation) | | |

**Coverage:**
- v1 requirements: 30 total
- Mapped to phases: 0 (pending roadmap)
- Unmapped: 30

---
*Requirements defined: 2026-02-05*
*Last updated: 2026-02-05 after initial definition*
