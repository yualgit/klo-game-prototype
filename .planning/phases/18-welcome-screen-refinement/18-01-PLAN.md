---
phase: 18-welcome-screen-refinement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/scenes/LevelSelect.ts
  - src/scenes/Menu.ts
autonomous: true

must_haves:
  truths:
    - "User cannot navigate back to welcome screen after pressing PLAY"
    - "KLO Match-3 title fits mobile screen width without clipping on any viewport"
  artifacts:
    - path: "src/scenes/LevelSelect.ts"
      provides: "Level select without back-to-menu button"
      contains: "class LevelSelect"
    - path: "src/scenes/Menu.ts"
      provides: "Responsive title sizing for mobile"
      contains: "KLO Match-3"
  key_links:
    - from: "src/scenes/Menu.ts"
      to: "src/scenes/LevelSelect.ts"
      via: "scene.start('LevelSelect') on PLAY — one-way transition, no return"
      pattern: "scene\\.start\\('LevelSelect'\\)"
---

<objective>
Remove the back-to-menu button from LevelSelect and make the Menu title responsive on mobile.

Purpose: After pressing PLAY, users should be committed to the game flow (no returning to welcome screen). The title must be readable on all mobile widths without horizontal clipping.

Output: Modified LevelSelect.ts (no back button) and Menu.ts (responsive title font size).
</objective>

<execution_context>
@/Users/vasiliyhrebenuyk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/vasiliyhrebenuyk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/scenes/LevelSelect.ts
@src/scenes/Menu.ts
@src/utils/responsive.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove back-to-menu button from LevelSelect</name>
  <files>src/scenes/LevelSelect.ts</files>
  <action>
    Remove the `createBackButton()` method entirely from the LevelSelect class. Also remove:
    1. The `private backButton: Phaser.GameObjects.Container;` property declaration (line 38)
    2. The `this.createBackButton();` call in `create()` (line 96)
    3. The back button repositioning logic in `handleResize()` (lines 865-867, the `if (this.backButton)` block)
    4. The entire `createBackButton()` private method (lines 423-468)

    This ensures that once the user presses PLAY on the Menu scene and transitions to LevelSelect, there is no way to navigate back to the Menu/welcome screen. Navigation within the app is handled by UIScene bottom tabs (Levels, Collections).
  </action>
  <verify>
    Run `npx tsc --noEmit` to confirm no TypeScript errors after removing the back button references. Grep for "backButton" and "createBackButton" and "Меню" in LevelSelect.ts to confirm all references are removed.
  </verify>
  <done>LevelSelect scene has no back button, no references to backButton property, and no way to navigate to Menu scene.</done>
</task>

<task type="auto">
  <name>Task 2: Make Menu title scale to fit mobile screen width</name>
  <files>src/scenes/Menu.ts</files>
  <action>
    Make the "KLO Match-3" title font size responsive to viewport width so it never clips on narrow mobile screens.

    In the `create()` method, replace the fixed font size `cssToGame(48)` with a dynamic calculation:
    - Calculate CSS width: `width / getDpr()` (where getDpr is imported from responsive.ts)
    - Target: title should use at most ~80% of screen width
    - Font size formula: `Math.min(cssToGame(48), width * 0.18)` — this ensures on a 320px CSS-width phone (640px Phaser at 2x DPR), the font is capped at ~115px Phaser (about 57px CSS equivalent), and on very narrow screens it scales down proportionally
    - Also add `wordWrap: { width: width * 0.85 }` to the text style as a safety net to prevent any overflow
    - Import `getDpr` from responsive.ts (already imported: cssToGame is there, just add getDpr to the import if not present)

    In the `handleResize()` method:
    - Update title font size dynamically: `this.title.setFontSize(Math.min(cssToGame(48), width * 0.18))`
    - Update word wrap width: `this.title.setWordWrapWidth(width * 0.85)`
    - Update subtitle font size similarly for consistency (keep its current proportional relationship)
  </action>
  <verify>
    Run `npx tsc --noEmit` to confirm no TypeScript errors. Visually inspect at different browser widths (resize to 320px, 375px, 414px, 768px, 1024px) to confirm title fits without clipping.
  </verify>
  <done>"KLO Match-3" title scales down on narrow viewports and never extends beyond screen width. On desktop/tablet it remains at the original 48px CSS size.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with no errors
2. No "backButton", "createBackButton", or "Меню" references in LevelSelect.ts
3. Menu title uses dynamic font sizing based on viewport width
4. Menu handleResize updates font size on viewport change
</verification>

<success_criteria>
- LevelSelect has no back button or any way to return to Menu scene
- Menu title is readable and fully visible on 320px-wide mobile screens
- No TypeScript compilation errors
</success_criteria>

<output>
After completion, create `.planning/phases/18-welcome-screen-refinement/18-01-SUMMARY.md`
</output>
