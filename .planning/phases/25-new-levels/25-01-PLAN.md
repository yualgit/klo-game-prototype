---
phase: 25-new-levels
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - public/data/levels/level_011.json
  - public/data/levels/level_012.json
  - public/data/levels/level_013.json
  - public/data/levels/level_014.json
  - public/data/levels/level_015.json
  - public/data/levels/level_016.json
  - public/data/levels/level_017.json
  - public/data/levels/level_018.json
  - public/data/levels/level_019.json
  - public/data/levels/level_020.json
autonomous: true

must_haves:
  truths:
    - "10 new level JSON files (L11-L20) exist in public/data/levels/"
    - "All 9 tile types appear across the new levels (burger, coffee, fuel_can, hotdog, oil, snack, soda, water, wheel)"
    - "New levels use 7x7 grids with varied cell_map shapes"
    - "Progressive difficulty from medium to expert across L11-L20"
    - "Obstacle variety increases: ice, grass, crate with multi-layer variants"
    - "Some new levels are bonus_level:true for card pick flow"
  artifacts:
    - path: "public/data/levels/level_011.json"
      provides: "Level 11 data"
      contains: "level_id.*11"
    - path: "public/data/levels/level_020.json"
      provides: "Level 20 data"
      contains: "level_id.*20"
  key_links:
    - from: "public/data/levels/level_011.json"
      to: "src/game/tileConfig.ts"
      via: "spawn_rules keys match TILE_CONFIG keys"
      pattern: "coffee|fuel_can|wheel"
---

<objective>
Create 10 new level JSON files (L11-L20) with 7x7 boards, progressive difficulty, and all 9 tile types.

Purpose: Expand game content from 10 to 20 levels, using the 3 new tile types (coffee, fuel_can, wheel) introduced in Phase 23, creating varied gameplay through unique board shapes, escalating obstacles, and challenging goals.

Output: 10 JSON files in public/data/levels/ following existing level schema.
</objective>

<execution_context>
@/Users/vasiliyhrebenuyk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/vasiliyhrebenuyk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Existing level files for schema reference
@public/data/levels/level_001.json
@public/data/levels/level_006.json
@public/data/levels/level_010.json

# Tile types — all 9 must appear
@src/game/tileConfig.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create L11-L15 level JSONs (medium to medium-hard)</name>
  <files>
    public/data/levels/level_011.json
    public/data/levels/level_012.json
    public/data/levels/level_013.json
    public/data/levels/level_014.json
    public/data/levels/level_015.json
  </files>
  <action>
Create 5 level JSON files following the established schema from existing levels. Each file must have: level_id, name (Ukrainian), moves, grid (width:7, height:7, cell_map for shaped boards), goals, spawn_rules, obstacles, difficulty, target_fail_rate. Optional: bonus_level, pre_placed_tiles, tutorial.

**Level 11 — "Кавовий ранок" (medium, moves: 18)**
- Full 7x7 board (no cell_map needed)
- Introduces coffee tile type in spawn_rules
- spawn_rules: burger 0.15, coffee 0.20, hotdog 0.15, oil 0.10, snack 0.15, soda 0.15, water 0.10
- Goals: collect coffee x25
- Obstacles: ice layers:1 at [[2,2],[2,4],[4,2],[4,4]]
- bonus_level: true
- difficulty: "medium", target_fail_rate: 0.20

**Level 12 — "Паливна станція" (medium, moves: 17)**
- Introduces fuel_can tile type
- cell_map: T-shape (wide top row, narrow column in center)
  ```
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [0,0,1,1,1,0,0],
  [0,0,1,1,1,0,0],
  [0,0,1,1,1,0,0],
  [0,0,1,1,1,0,0],
  [0,0,1,1,1,0,0]
  ```
- inactive_cell_style: "block"
- spawn_rules: burger 0.15, fuel_can 0.20, hotdog 0.15, oil 0.10, snack 0.15, soda 0.15, water 0.10
- Goals: collect fuel_can x18, destroy_obstacle ice x6
- Obstacles: ice layers:2 at [[0,2],[0,4],[1,3]]
- difficulty: "medium", target_fail_rate: 0.20

**Level 13 — "Колесо фортуни" (medium, moves: 18)**
- Introduces wheel tile type
- cell_map: circular/octagon shape
  ```
  [0,1,1,1,1,1,0],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [0,1,1,1,1,1,0]
  ```
- inactive_cell_style: "block"
- spawn_rules: burger 0.12, coffee 0.12, fuel_can 0.12, hotdog 0.12, oil 0.10, snack 0.12, soda 0.12, water 0.10, wheel 0.08
- Goals: collect wheel x12, collect burger x15
- Obstacles: grass layers:2 at [[3,3],[2,3],[4,3]]
- difficulty: "medium", target_fail_rate: 0.22

**Level 14 — "Крижана дорога" (medium-hard, moves: 20)**
- bonus_level: true
- Uses all 9 tile types in spawn_rules
- cell_map: arrow pointing right
  ```
  [0,0,1,1,0,0,0],
  [0,1,1,1,1,0,0],
  [1,1,1,1,1,1,0],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,0],
  [0,1,1,1,1,0,0],
  [0,0,1,1,0,0,0]
  ```
- inactive_cell_style: "block"
- spawn_rules: burger 0.12, coffee 0.12, fuel_can 0.10, hotdog 0.12, oil 0.10, snack 0.12, soda 0.10, water 0.10, wheel 0.12
- Goals: destroy_obstacle ice x12, destroy_obstacle grass x6
- Obstacles: ice layers:3 at [[3,3],[3,4]], grass layers:3 at [[2,2],[4,4]]
- pre_placed_tiles: [{row:3, col:6, type:"wheel", booster:"bomb"}]
- difficulty: "medium-hard", target_fail_rate: 0.25

**Level 15 — "Бульбашкове поле" (medium-hard, moves: 16)**
- Full 7x7 board
- spawn_rules: burger 0.12, coffee 0.12, fuel_can 0.12, hotdog 0.12, oil 0.10, snack 0.12, soda 0.12, water 0.10, wheel 0.08
- Goals: collect coffee x15, collect fuel_can x15, destroy_obstacle crate x4
- Obstacles: crate layers:2 at [[1,1],[1,5],[5,1],[5,5]]
- difficulty: "medium-hard", target_fail_rate: 0.25
  </action>
  <verify>
All 5 JSON files exist and are valid JSON:
```bash
for i in 011 012 013 014 015; do echo "level_$i.json:" && node -e "const d=require('./public/data/levels/level_$i.json'); console.log('  id:', d.level_id, 'moves:', d.moves, 'goals:', d.goals.length, 'types:', Object.keys(d.spawn_rules).length)"; done
```
Verify all spawn_rules values sum to 1.0 (±0.02).
  </verify>
  <done>
5 level JSON files (L11-L15) exist with valid schema, each introducing new tile types progressively (coffee→fuel_can→wheel→all 9), with varied board shapes and escalating obstacle complexity.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create L16-L20 level JSONs (hard to expert)</name>
  <files>
    public/data/levels/level_016.json
    public/data/levels/level_017.json
    public/data/levels/level_018.json
    public/data/levels/level_019.json
    public/data/levels/level_020.json
  </files>
  <action>
Create 5 more level JSON files continuing the progressive difficulty curve. These are the hardest levels in the game: fewer moves per active cell, more obstacles, multi-layered ice/grass, complex board shapes, and challenging multi-goal combinations.

**Level 16 — "Льодяний хрест" (hard, moves: 20)**
- cell_map: plus/cross shape
  ```
  [0,0,1,1,1,0,0],
  [0,0,1,1,1,0,0],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [0,0,1,1,1,0,0],
  [0,0,1,1,1,0,0]
  ```
- inactive_cell_style: "block"
- spawn_rules: burger 0.12, coffee 0.12, fuel_can 0.10, hotdog 0.12, oil 0.10, snack 0.12, soda 0.10, water 0.10, wheel 0.12
- Goals: destroy_obstacle ice x15, collect wheel x18
- Obstacles: ice layers:3 at [[2,3],[3,2],[3,3],[3,4],[4,3]], grass layers:2 at [[2,2],[4,4]]
- bonus_level: true
- difficulty: "hard", target_fail_rate: 0.30

**Level 17 — "Подвійний удар" (hard, moves: 18)**
- Full 7x7 board
- spawn_rules: burger 0.11, coffee 0.11, fuel_can 0.11, hotdog 0.11, oil 0.11, snack 0.11, soda 0.11, water 0.11, wheel 0.12
- Goals: collect coffee x18, collect fuel_can x18, destroy_obstacle grass x9
- Obstacles: grass layers:3 at [[0,0],[0,6],[6,0]], crate layers:2 at [[3,3]]
- difficulty: "hard", target_fail_rate: 0.30

**Level 18 — "Фортеця KLO" (hard, moves: 22)**
- cell_map: ring/frame shape (hollow center)
  ```
  [1,1,1,1,1,1,1],
  [1,1,1,0,1,1,1],
  [1,1,0,0,0,1,1],
  [1,0,0,0,0,0,1],
  [1,1,0,0,0,1,1],
  [1,1,1,0,1,1,1],
  [1,1,1,1,1,1,1]
  ```
- inactive_cell_style: "block"
- spawn_rules: burger 0.12, coffee 0.12, fuel_can 0.10, hotdog 0.12, oil 0.10, snack 0.12, soda 0.10, water 0.10, wheel 0.12
- Goals: collect burger x20, destroy_obstacle ice x12
- Obstacles: ice layers:3 at [[0,3],[3,0],[6,3],[3,6]], crate layers:3 at [[1,1],[5,5]]
- pre_placed_tiles: [{row:0, col:0, type:"coffee", booster:"linear_horizontal"}]
- difficulty: "hard", target_fail_rate: 0.30

**Level 19 — "Останній рубіж" (expert, moves: 20)**
- bonus_level: true
- cell_map: zigzag/staircase
  ```
  [1,1,1,0,0,0,0],
  [1,1,1,1,0,0,0],
  [0,1,1,1,1,0,0],
  [0,0,1,1,1,1,0],
  [0,0,0,1,1,1,1],
  [0,0,0,0,1,1,1],
  [0,0,0,0,0,1,1]
  ```
- inactive_cell_style: "block"
- spawn_rules: burger 0.11, coffee 0.11, fuel_can 0.11, hotdog 0.11, oil 0.11, snack 0.11, soda 0.11, water 0.11, wheel 0.12
- Goals: destroy_obstacle ice x9, destroy_obstacle grass x9, destroy_obstacle crate x4
- Obstacles: ice layers:3 at [[0,0],[1,3]], grass layers:3 at [[4,5],[6,6]], crate layers:2 at [[2,2],[3,4]]
- difficulty: "expert", target_fail_rate: 0.35

**Level 20 — "Фінал KLO" (expert, moves: 22)**
- cell_map: KLO-logo inspired broad shape
  ```
  [1,0,1,1,1,0,1],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1],
  [1,0,1,1,1,0,1]
  ```
- inactive_cell_style: "block"
- spawn_rules: burger 0.11, coffee 0.11, fuel_can 0.11, hotdog 0.11, oil 0.11, snack 0.11, soda 0.11, water 0.11, wheel 0.12
- Goals: collect wheel x22, destroy_obstacle ice x15, destroy_obstacle grass x9
- Obstacles: ice layers:3 at [[1,3],[2,2],[2,4],[3,1],[3,5]], grass layers:3 at [[4,2],[4,4],[5,3]]
- pre_placed_tiles: [{row:3, col:3, type:"wheel", booster:"klo_sphere"}]
- difficulty: "expert", target_fail_rate: 0.40
  </action>
  <verify>
All 5 JSON files exist and are valid JSON:
```bash
for i in 016 017 018 019 020; do echo "level_$i.json:" && node -e "const d=require('./public/data/levels/level_$i.json'); console.log('  id:', d.level_id, 'moves:', d.moves, 'goals:', d.goals.length, 'types:', Object.keys(d.spawn_rules).length)"; done
```
Verify all spawn_rules values sum to 1.0 (±0.02). Verify L20 has pre_placed_tiles with klo_sphere booster.
  </verify>
  <done>
5 level JSON files (L16-L20) exist with valid schema, featuring hard-to-expert difficulty, all 9 tile types, complex board shapes, multi-layered obstacles, and the final level has a pre-placed KLO-sphere booster as a dramatic finale.
  </done>
</task>

</tasks>

<verification>
1. All 10 JSON files are valid JSON: `for i in $(seq -w 11 20); do node -e "JSON.parse(require('fs').readFileSync('public/data/levels/level_0$i.json','utf8'))"; echo "level_0$i.json OK"; done`
2. Each level uses 7x7 grid dimensions
3. All 9 tile types appear across the levels (check spawn_rules keys)
4. Difficulty progression: L11-L13 medium, L14-L15 medium-hard, L16-L18 hard, L19-L20 expert
5. Bonus levels flagged: L11, L14, L16, L19 (every 3rd level continues rotation pattern for collections)
</verification>

<success_criteria>
- 10 new level JSON files exist in public/data/levels/
- All files follow exact same schema as existing L1-L10
- Coffee, fuel_can, and wheel tile types appear in spawn_rules
- Goal counts, moves, and obstacle complexity increase progressively
- Board shapes are unique and visually interesting (not all full 7x7)
</success_criteria>

<output>
After completion, create `.planning/phases/25-new-levels/25-01-SUMMARY.md`
</output>
